<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TestURTutor: Select your subjects</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="subjects-container">
      <div class="subject-intro">
        Select the subjects you would like to test yourself for?
      </div>
      <div class="subject">
        <input type="checkbox" id="Maths" name="tabs" checked />
        <label for="Maths">Maths</label>
      </div>

      <div class="subject">
        <input type="checkbox" id="Science" name="tabs" />
        <label for="Science">Science</label>
      </div>

      <div class="subject">
        <input type="checkbox" id="Physics" name="tabs" />
        <label for="Physics">Physics</label>
      </div>

      <div class="subject">
        <input type="checkbox" id="Biology" name="tabs" />
        <label for="Biology">Biology</label>
      </div>

      <div class="subject">
        <input type="checkbox" id="Chemistry" name="tabs" />
        <label for="Chemistry">Chemistry</label>
      </div>
    </div>
    <div class="button-container">
      <input
        type="button"
        value="Take Test"
        class="btn TakeTestBtn"
        id="takeTestButton"
      />
    </div>
    <!-- Modal -->
    <div id="myModal" class="modal">
      <div class="modal-content">
        <p>
          You will get 2 minutes to answer the question. The timer will start as
          soon as you click 'yes'. Would you like to proceed with the test?
        </p>
        <div class="modal-buttons">
          <button id="yesButton">Yes</button>
          <button id="noButton">No</button>
        </div>
      </div>
    </div>
    <script src="script.js"></script>
    <script>
      const openModal = () => {
        const modal = document.getElementById("myModal");
        modal.style.display = "block";
      };

      const takeTestButton = document.getElementById("takeTestButton");
      takeTestButton.addEventListener("click", () => {
        // Gather the selected subjects
        const selectedSubjects = [];
        const subjectCheckboxes = document.querySelectorAll(
          '.subject input[type="checkbox"]'
        );
        subjectCheckboxes.forEach((checkbox) => {
          if (checkbox.checked) {
            selectedSubjects.push(checkbox.id);
          }
        });

        // Create a JSON object containing the selected subjects
        const data = {
          subjects: selectedSubjects,
        };

        // Send the JSON object to the backend server
        fetch("http://your-backend-server.com/endpoint", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        })
          .then((response) => {
            if (response.ok) {
              console.log("Subjects sent successfully");

              openModal();
              // Event listener for "Yes" button in modal
              const yesButton = document.getElementById("yesButton");
              yesButton.addEventListener("click", () => {
                // Redirect to question.html
                window.location.href = "question.html";

                // Event listener for "no" button in modal
                const noButton = document.getElementById("noButton");
                yesButton.addEventListener("click", () => {
                  // Redirect to subject.html
                  window.location.href = "subject.html";
                });
              });
            } else {
              console.error("Failed to send subjects");
            }
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      });
    </script>
  </body>
</html>
